<!-- Code from d3-graph-gallery.com -->
<!DOCTYPE html>
<meta charset="utf-8">
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<!-- Add 2 buttons -->
<button onclick="buttonclickChoice()">Pro-Choice</button>
<button onclick="buttonclickLife()">Pro-Life</button>
<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>
<script>
  // create 2 data_set
  var data1 = [{
    group: 'Alabama',
    value: 0.5791042957987104
  }, {
    group: 'Alaska',
    value: 0.4129639351467812
  }, {
    group: 'Arkansas',
    value: 0.6448966755586512
  }, {
    group: 'Florida',
    value: 0.5087628542283259
  }, {
    group: 'Idaho',
    value: 0.4129639351326712
  }, {
    group: 'Indiana',
    value: 0.5129639351367951
  }, {
    group: 'Iowa',
    value: 0.17119704683621728
  }, {
    group: 'Kansas',
    value: 0.20703384041786194
  }, {
    group: 'Kentucky',
    value: 0.2626652249268123
  }, {
    group: 'Louisiana',
    value: 0.504293384651343
  }, {
    group: 'Mississippi',
    value: 0.1189290016889572
  }, {
    group: 'Missouri',
    value: 0.30419457790463467
  }, {
    group: 'Montana',
    value: 0.11697695321506923
  }, {
    group: 'Nebraska',
    value: 0.05813427269458771
  }, {
    group: 'North Carolina',
    value: 0.17216818059905098
  }, {
    group: 'North Dakota',
    value: 0.0028321941693623676
  }, {
    group: 'Ohio',
    value: 0.34602172010474735
  }, {
    group: 'Oklahoma',
    value: 0.2382406090435229
  }, {
    group: 'South Carolina',
    value: 0.5545977056026459
  }, {
    group: 'South Dakota',
    value: 0.24496375769376755
  }, {
    group: 'Tennessee',
    value: 0.18991718292236326
  }, {
    group: 'Texas',
    value: 0.27817256330586165
  }, {
    group: 'Utah',
    value: 0.044036754540034695
  }, {
    group: 'West Virginia',
    value: 0.0065987408161163885
  }, {
    group: 'Wyoming',
    value: 0.289917182540034695
  }];


  var data2 = [{
    group: 'Alabama',
    value: 0.7844707807525992
  }, {
    group: 'Alaska',
    value: 0.6970433456346343
  }, {
    group: 'Arkansas',
    value: 0.7519979327917099
  }, {
    group: 'Florida',
    value: 0.7872185356205418
  }, {
    group: 'Idaho',
    value: 0.7509260028600693
  }, {
    group: 'Indiana',
    value: 0.8071154383942485
  }, {
    group: 'Iowa',
    value: 0.7518710930432593
  }, {
    group: 'Kansas',
    value: 0.7870430909097195
  }, {
    group: 'Kentucky',
    value: 0.750376674036185
  }, {
    group: 'Louisiana',
    value: 0.7800178037662255
  }, {
    group: 'Mississippi',
    value: 0.7518739199096507
  }, {
    group: 'Missouri',
    value: 0.860876300268703
  }, {
    group: 'Montana',
    value: 0.7588693592697382
  }, {
    group: 'Nebraska',
    value: 0.7514344932777541
  }, {
    group: 'North Carolina',
    value: 0.7758619381735723
  }, {
    group: 'North Dakota',
    value: 0.7509743943810463
  }, {
    group: 'Ohio',
    value: 0.7839463273599996
  }, {
    group: 'Oklahoma',
    value: 0.7747200487012214
  }, {
    group: 'South Carolina',
    value: 0.7953238412737846
  }, {
    group: 'South Dakota',
    value: 0.7474576456345637
  }, {
    group: 'Tennessee',
    value: 0.7798331248409608
  }, {
    group: 'Texas',
    value: 0.7925639572261853
  }, {
    group: 'Utah',
    value: 0.7505826652050018
  }, {
    group: 'West Virginia',
    value: 0.7615848556160927
  }, {
    group: 'Wyoming',
    value: 0.7234235625623234
  }];



  // set the dimensions and margins of the graph
  var margin = {
      top: 30,
      right: 30,
      bottom: 70,
      left: 60
    },
    width = 1900 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;
  // append the svg object to the body of the page
  var svg = d3.select("#my_dataviz").append("svg").attr("width", width + margin.left + margin.right).attr("height", height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  // Initialize the X axis
  var x = d3.scaleBand().range([0, width]).padding(0.2);
  var xAxis = svg.append("g").attr("transform", "translate(0," + height + ")")
  // Initialize the Y axis
  var y = d3.scaleLinear().range([height, 0]);
  var yAxis = svg.append("g").attr("class", "myYaxis")
  // Graph title
  svg.append("text").attr("x", (width / 2)).attr("y", 0 - (margin.top / 2)).attr("text-anchor", "middle").style("font-size", "16px").text("Abortion Sentiment Across Republican States");
  // A function that create / update the plot for a given variable:
  function update(data) {
    // Update the X axis
    x.domain(data.map(function(d) {
      return d.group;
    }))
    xAxis.call(d3.axisBottom(x))
    // Update the Y axis
    y.domain([0, d3.max(data, function(d) {
      return d.value
    })]);
    yAxis.transition().duration(1000).call(d3.axisLeft(y));
    // Create the u variable
    var u = svg.selectAll("rect").data(data)
    u.enter().append("rect") // Add a new rect for each new elements
      .merge(u) // get the already existing elements as well
      .transition() // and apply changes to all of them
      .duration(1000).attr("x", function(d) {
        return x(d.group);
      }).attr("y", function(d) {
        return y(d.value);
      }).attr("width", x.bandwidth()).attr("height", function(d) {
        return height - y(d.value);
      }).attr("fill", "red")
    // If less group in the new dataset, I delete the ones not in use anymore
    u.exit().remove()
  }
   // This function is called by the buttons on top of the plot
    function changeColor(color){
      d3.selectAll("rect")
        .transition()
        .duration(2000)
        .style("fill", color)
    }
   // function calls
    function buttonclickLife(){
        update(data2);
    }
    function buttonclickChoice(){
        update(data1);
    }
  // Initialize the plot with the first dataset
  update(data1)
</script>