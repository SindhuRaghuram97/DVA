<!-- Code from d3-graph-gallery.com -->
<!DOCTYPE html>
<meta charset="utf-8">
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<!-- Add 2 buttons -->
<button onclick="update(data1)">Republican</button>
<button onclick="update(data2)">Democrat</button>
<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>
<script>
  // create 2 data_set
  var data1 = [{
    group: 'Alabama',
    value: 0.7844707807525992
  }, {
    group: 'Alaska',
    value: 0.6970433456346343
  }, {
    group: 'Arkansas',
    value: 0.7519979327917099
  }, {
    group: 'Florida',
    value: 0.7872185356205418
  }, {
    group: 'Idaho',
    value: 0.7509260028600693
  }, {
    group: 'Indiana',
    value: 0.8071154383942485
  }, {
    group: 'Iowa',
    value: 0.7518710930432593
  }, {
    group: 'Kansas',
    value: 0.7870430909097195
  }, {
    group: 'Kentucky',
    value: 0.750376674036185
  }, {
    group: 'Louisiana',
    value: 0.7800178037662255
  }, {
    group: 'Mississippi',
    value: 0.7518739199096507
  }, {
    group: 'Missouri',
    value: 0.860876300268703
  }, {
    group: 'Montana',
    value: 0.7588693592697382
  }, {
    group: 'Nebraska',
    value: 0.7514344932777541
  }, {
    group: 'North Carolina',
    value: 0.7758619381735723
  }, {
    group: 'North Dakota',
    value: 0.7509743943810463
  }, {
    group: 'Ohio',
    value: 0.7839463273599996
  }, {
    group: 'Oklahoma',
    value: 0.7747200487012214
  }, {
    group: 'South Carolina',
    value: 0.7953238412737846
  }, {
    group: 'South Dakota',
    value: 0.7474576456345637
  }, {
    group: 'Tennessee',
    value: 0.7798331248409608
  }, {
    group: 'Texas',
    value: 0.7925639572261853
  }, {
    group: 'Utah',
    value: 0.7505826652050018
  }, {
    group: 'West Virginia',
    value: 0.7615848556160927
  }, {
    group: 'Wyoming',
    value: 0.7234235625623234
  }];


  var data2 = [{
    group: 'Arizona',
    value: 0.778819025804599
  }, {
    group: 'California',
    value: 0.7820111477769303
  }, {
    group: 'Colorado',
    value: 0.7968400772660971
  }, {
    group: 'Connecticut',
    value: 0.8078865855932236
  }, {
    group: 'Delaware',
    value: 0.7512832904855411
  }, {
    group: 'District of Columbia',
    value: 0.752389132976532
  }, {
    group: 'Georgia',
    value: 0.776640301818649
  }, {
    group: 'Hawaii',
    value: 0.7831211636463802
  }, {
    group: 'Illinois',
    value: 0.8299357108771801
  }, {
    group: 'Maine',
    value: 0.7544960368956839
  }, {
    group: 'Maryland',
    value: 0.7919475186397047
  }, {
    group: 'Massachusetts',
    value: 0.8167220996249289
  }, {
    group: 'Michigan',
    value: 0.7724151777533385
  }, {
    group: 'Minnesota',
    value: 0.8248838526862008
  }, {
    group: 'Nevada',
    value: 0.7560927962002002
  }, {
    group: 'New Hampshire',
    value: 0.7555908709764481
  }, {
    group: 'New Jersey',
    value: 0.7633906602859497
  }, {
    group: 'New Mexico',
    value: 0.7545182864580835
  }, {
    group: 'New York',
    value: 0.8017826133411423
  }, {
    group: 'Oregon',
    value: 0.7785759367621862
  }, {
    group: 'Pennsylvania',
    value: 0.7912458927746404
  }, {
    group: 'Rhode Island',
    value: 0.7894915054951395
  }, {
    group: 'Vermont',
    value: 0.850799173116684
  }, {
    group: 'Virginia',
    value: 0.8253962313135466
  }, {
    group: 'Washington',
    value: 0.7962614685560749
  }, {
    group: 'Wisconsin',
    value: 0.7548133410513401
  }];
  // set the dimensions and margins of the graph
  var margin = {
      top: 30,
      right: 30,
      bottom: 70,
      left: 60
    },
    width = 1900 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;
  // append the svg object to the body of the page
  var svg = d3.select("#my_dataviz").append("svg").attr("width", width + margin.left + margin.right).attr("height", height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  // Initialize the X axis
  var x = d3.scaleBand().range([0, width]).padding(0.2);
  var xAxis = svg.append("g").attr("transform", "translate(0," + height + ")")
  // Initialize the Y axis
  var y = d3.scaleLinear().range([height, 0]);
  var yAxis = svg.append("g").attr("class", "myYaxis")
  // Graph title
  svg.append("text").attr("x", (width / 2)).attr("y", 0 - (margin.top / 2)).attr("text-anchor", "middle").style("font-size", "16px").text("Pro-Abortion Sentiment Across States");
  // A function that create / update the plot for a given variable:
  function update(data) {
    // Update the X axis
    x.domain(data.map(function(d) {
      return d.group;
    }))
    xAxis.call(d3.axisBottom(x))
    // Update the Y axis
    y.domain([0, d3.max(data, function(d) {
      return d.value
    })]);
    yAxis.transition().duration(1000).call(d3.axisLeft(y));
    // Create the u variable
    var u = svg.selectAll("rect").data(data)
    u.enter().append("rect") // Add a new rect for each new elements
      .merge(u) // get the already existing elements as well
      .transition() // and apply changes to all of them
      .duration(1000).attr("x", function(d) {
        return x(d.group);
      }).attr("y", function(d) {
        return y(d.value);
      }).attr("width", x.bandwidth()).attr("height", function(d) {
        return height - y(d.value);
      }).attr("fill", "#69b3a2")
    // If less group in the new dataset, I delete the ones not in use anymore
    u.exit().remove()
  }
  // Initialize the plot with the first dataset
  update(data1)
</script>